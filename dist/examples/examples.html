<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
	<title>Sparqlycode Examples - Codeleaks</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="DC.Title" content="Sparqlycode Examples - Codeleaks">

	<meta name="description" content="wiki for Codeleaks product set - Eg SPARQLYCODE">


	<link rel="start" title="Codeleaks" href="http://www.interition.net:1966/interwiki/codeleaks/Codeleaks">
	<link rel="home" title="Codeleaks" href="http://www.interition.net:1966/interwiki/codeleaks/Codeleaks">

	<link href="examples_files/jamwiki.css" type="text/css" rel="stylesheet">
</head>
<body style="background:none">

<h1 id="contents-header">Sparqlycode Examples</h1>




	
		
			<div id="content-article">
			
			
			
			<table id="toc">
<tbody><tr>
<th>Contents <span class="toctoggle hidden" id="toggle-link-wrapper">[<a id="toggle-link" href="#">hide</a>]</span></th>
</tr>
<tr>
<td id="toc-content">
<ul>
<li><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a><ul>
<li><a href="#Standard_PREFIX.27s_for_vocabularies"><span class="tocnumber">1.1</span> <span class="toctext">Standard PREFIX's for vocabularies</span></a></li>
<li><a href="#Base_Uri_for_instances_of_Java_Sparqlycode"><span class="tocnumber">1.2</span> <span class="toctext">Base Uri for instances of Java Sparqlycode</span></a></li>
<li><a href="#Project_build_and_configuration_as_RDF"><span class="tocnumber">1.3</span> <span class="toctext">Project build and configuration as RDF</span></a></li>
<li><a href="#Prefix_Summary"><span class="tocnumber">1.4</span> <span class="toctext">Prefix Summary</span></a></li>
<li><a href="#Named_Graphs"><span class="tocnumber">1.5</span> <span class="toctext">Named Graphs</span></a></li>
</ul></li>
<li><a href="#Test_Data"><span class="tocnumber">2</span> <span class="toctext">Test Data</span></a></li>
<li><a href="#SPARQL_Queries"><span class="tocnumber">3</span> <span class="toctext">SPARQL Queries</span></a><ul>
<li><a href="#Exploring_the_available_concepts_and_vocabulary"><span class="tocnumber">3.1</span> <span class="toctext">Exploring the available concepts and vocabulary</span></a></li>
<li><a href="#Exploring_facts_about_Java_Classes"><span class="tocnumber">3.2</span> <span class="toctext">Exploring facts about Java Classes</span></a><ul>
<li><a href="#Properties_of_Classes"><span class="tocnumber">3.2.1</span> <span class="toctext">Properties of Classes</span></a></li>
</ul></li>
<li><a href="#Linking_source_code_across_packages"><span class="tocnumber">3.3</span> <span class="toctext">Linking source code across packages</span></a><ul>
<li><a href="#Default_Graph"><span class="tocnumber">3.3.1</span> <span class="toctext">Default Graph</span></a></li>
</ul></li>
</ul></li>
</ul>
</td>
</tr>
</tbody></table>
<script type="text/javascript">
JAMWiki.UI.removeClass(document.getElementById("toggle-link-wrapper"), "hidden");
JAMWiki.UI.initializeTocToggle("hide", "show");
</script>
<h1><span id="Overview">Overview</span></h1>
<h2><span id="Standard_PREFIX.27s_for_vocabularies">Standard PREFIX's for vocabularies</span></h2>
<p>Sparqlycode vocabulary for Java:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
</pre>
<p>Sparqlycode vocabulary for Maven:</p>
<pre style="color: green">PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
</pre>
<p>W3C RDF:</p>
<pre style="color: green">PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
</pre>
<h2><span id="Base_Uri_for_instances_of_Java_Sparqlycode">Base Uri for instances of Java Sparqlycode</span></h2>
<p>The examples here are based on sparqlycode rdf for ActiveMQ AMQP Version 5.9.1 from the Git rep <a class="externallink" rel="nofollow" href="https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-amqp;h=06f081e58b26d664d54b27ea493c741512f313b5;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d">https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-amqp;h=06f081e58b26d664d54b27ea493c741512f313b5;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d</a>
 . The Base Uri refers to the part of a unique identifier that will be 
common to all instances of sparqlycode concepts that share the same 
domain.  This is also known as a shared namespace.</p>
<p>For example, if the common part of the Uri is the Git URL to the root
 of the source code tree you might declare a prefix for a namespace 
like:</p>
<pre style="color: green">PREFIX amqp: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-amqp/src/main/java;h=3d31458ef3d744597f4c02c3ff9d93801a4e9eae;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt;
</pre>
<p>An instance of java:Class might then look like:</p>
<pre style="color: green">amqp:org/apache/activemq/transport/amqp/ActiveMQJMSVendor
</pre>
<p><u>However, minting Uri for concepts in Java is not a trivial task.  
This is going to be part of the commercial solution. It is a hard 
problem that we can add significant value by solving.</u></p>
<p>In this version of Sparqlycode the Base Uri cannot be specified. All 
instances of Sparqlycode concepts will share the same uri namespace of <a class="externallink" rel="nofollow" href="http://www.interition.net/sparqlycode/id">http://www.interition.net/sparqlycode/id</a> .  The prefix you will want to use in this case is:</p>
<pre style="color: green">PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
</pre>
<p><br></p>
<h2><span id="Project_build_and_configuration_as_RDF">Project build and configuration as RDF</span></h2>
<p>The URI for the Maven POM extends the Git URL to produce a PREFIX of:</p>
<p><br></p>
<pre style="color: green">PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;
</pre>
<h2><span id="Prefix_Summary">Prefix Summary</span></h2>
<p>For your convenience the prefix's for your SPARQL queries should be:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;

PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;

PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;

PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;

PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;

</pre>
<h2><span id="Named_Graphs">Named Graphs</span></h2>
<p>As a practice we are placing the Sparqlycode RDF for a given software
 project in a Named Graph. We are using the root of the source code 
control tree as the name. In this case for ActiveMQ that is the URL <a class="externallink" rel="nofollow" href="https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/">https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/</a>  . (Note the trailing "/" is added).</p>
<p>When using this as a Graph in SPARQL it would look something like...</p>
<pre style="color: green">SELECT *
FROM &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt;
 {
 
   ?s ?p ?o .

} LIMIT 100

</pre>
<h1><span id="Test_Data">Test Data</span></h1>
<p>For your convenience the sparclycode RDF for Apache ActiveMQ 5.9.1 
can be found in $SPARQLYCODE_HOME/rdf/org.apache.activemq/5.9.1 .  If 
you want to jump straight to querying sparclycode load these Turtle 
files into your triplestore, or other runtime environment for query 
execution, with a named graph as previously introduced.</p>
<p>If you want to generate sparclycode RDF for your own Maven based Java project, then refer to xxxxx</p>
<p><br></p>
<h1><span id="SPARQL_Queries">SPARQL Queries</span></h1>
<h2><span id="Exploring_the_available_concepts_and_vocabulary">Exploring the available concepts and vocabulary</span></h2>
<p>The example expects the sparqlycode RDF to be in a Graph with an id 
of the Base Uri for the source code repository containing the Java code.
 You can check the existence of such a graph with the following:</p>
<pre style="color: green">
SELECT distinct ?g { GRAPH ?g {?s ?p ?o} } LIMIT 10

</pre>
<p><br>
To get the Type's of things that can be queried from this graph:</p>
<pre style="color: green">SELECT distinct ?type
FROM &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt;
 { 
   ?s a ?type .

} LIMIT 100
</pre>
<p><br>
To get available properties ( <b>Need to check why Properties are not resolving</b> ):</p>
<p><br></p>
<pre style="color: green">SELECT * { 
	?s a rdf:Property .
	} LIMIT 100
</pre>
<p><br></p>
<p><br></p>
<h2><span id="Exploring_facts_about_Java_Classes">Exploring facts about Java Classes</span></h2>
<h3><span id="Properties_of_Classes">Properties of Classes</span></h3>
<p>Lets see what properties are available on methods for a given Class. 
 Because the Uri are long it is getting difficult for us mortals to read
 now. However, this query finds methods for the class 
AmqpNioSslTransportFactory and then gets the properties and their 
values. If you change the SELECT projection on the query below to <i>distinct ?property</i>
 it will remove from view the other details. You will find that the 
properties include method Parameters and Returns : so you know what it 
needs provided and what it will return.</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT ?method ?property ?value
FROM &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt;
 { 
   &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory&gt; java:method ?method .
   ?method ?property ?value .

} 

</pre>
<p>Parameters to methods are modeled as bnodes and the following query will traverse those to show you their name and type:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT ?method ?parameter ?property ?value
FROM &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt;
 { 
   &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory&gt; java:method ?method .
   ?method java:parameter ?parameter .
   ?parameter ?property ?value .
} 
</pre>
<p><br></p>
<h2><span id="Linking_source_code_across_packages">Linking source code across packages</span></h2>
<p>A method of org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory had a parameter of type <a class="externallink" rel="nofollow" href="http://www.interition.net/sparqlycode/id/org/apache/activemq/wireformat/WireFormat">http://www.interition.net/sparqlycode/id/org/apache/activemq/wireformat/WireFormat</a>:
 as a package name  that would be 
org.apache.activemq.wireformat.WireFormat. This Class is part of 
org.apache.activemq but is a sub module known as activemq-client. To aid
 provenance our best practice is to define another graph for this 
modules sparqlycode. The graph would be named with the URL to the source
 code repository root for this module: in this case <a class="externallink" rel="nofollow" href="https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-client;h=4bf3b813dbd2322435f46b6513d86982e0445603;hb=b9d51bf1d4dc9e4fd9f4275356ac03c2fe652c54/">https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-client;h=4bf3b813dbd2322435f46b6513d86982e0445603;hb=b9d51bf1d4dc9e4fd9f4275356ac03c2fe652c54/</a> .</p>
<p>With such a graph we should get a list of properties and objects from the following question:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT *
FROM &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-client;h=4bf3b813dbd2322435f46b6513d86982e0445603;hb=b9d51bf1d4dc9e4fd9f4275356ac03c2fe652c54&gt;
 { 
   &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/wireformat/WireFormat&gt; ?p ?o .
} 
</pre>
<p>We can also explicitly query across the two graphs now to traverse 
the method of AmqpNioSslTransportFactory that has the parameter of type 
WireFormat. The query below takes the parameterType object resulting 
from the first graph and finds other properties from the second graph:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT ?type ?p ?o
 { 

   GRAPH &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d/&gt; 
      {
         &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory&gt; java:method ?method .
         ?method java:parameter ?parameter .
         ?parameter java:parameterType ?type .
      }
   GRAPH &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=tree;f=activemq-client;h=4bf3b813dbd2322435f46b6513d86982e0445603;hb=b9d51bf1d4dc9e4fd9f4275356ac03c2fe652c54&gt;
      {

       ?type ?p ?o .

      }
  
} 
</pre>
<p><br></p>
<h3><span id="Default_Graph">Default Graph</span></h3>
<p>Depending on the triplestore or runtime query environment you are 
using there may or maybe not be a default graph that is the combination 
of all graphs.  If this is the case then the following query will return
 the same result as the example in 'Linking source code across 
packages'.</p>
<p><br></p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT ?type ?p ?o
 { 
         &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory&gt; java:method ?method .
         ?method java:parameter ?parameter .
         ?parameter java:parameterType ?type .
         ?type ?p ?o .
} 
</pre>
<p>By extension, if we wanted to know what source code repositories each
 of these Java types came from we can do so by reporting the graph that 
contains them. The graph nam eis the Uri to the source code repository:</p>
<pre style="color: green">PREFIX java: &lt;http://www.interition.net/java/ref/&gt;
PREFIX maven: &lt;http://www.interition.net/sparqlycode/maven/vocabulary/&gt;
PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;
PREFIX sc: &lt;http://www.interition.net/sparqlycode/id&gt;
PREFIX pom: &lt;https://git-wip-us.apache.org/repos/asf?p=activemq.git;a=blob_plain;f=activemq-amqp/pom.xml;hb=bdb24ee7c78aa037a085bc7ce90bd216a3a13d3d?/&gt;


SELECT distinct ?source ?method ?type ?target
 { 
         GRAPH ?source {
            &lt;http://www.interition.net/sparqlycode/id/org/apache/activemq/transport/amqp/AmqpNioSslTransportFactory&gt; java:method ?method .
            ?method java:parameter ?parameter .
            ?parameter java:parameterType ?type }
         
        
         GRAPH ?target 
             { ?type ?p ?o }

} 
</pre>
<p><br></p>
<hr>
<p>Revision 966</p>
<p><br></p>
			</div>
			<div class="clear"></div>
			
		
	
	





	


	





</body></html>